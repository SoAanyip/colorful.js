(function(window){if(typeof define==="function"&&define.amd){define(function(){return startLoop})}else{window.startLoop=startLoop}function startLoop(element,array,msec,attr){if(!element)return;if(!Number(msec))msec=3e3;if(msec<400)msec=400;var second=msec/1e3;array=array||[[255,255,0],[0,220,220],[153,51,0]];for(var i=array.length-1;i>=0;i--){array[i].length<3?array[i].length<2?array[i].length<1?array[i][0]=0:array[i][1]=0:array[i][2]=0:"";array[i][0]>255?array[i][0]=255:"";array[i][1]>255?array[i][1]=255:"";array[i][2]>255?array[i][2]=255:"";array[i][0]<0?array[i][0]=0:"";array[i][1]<0?array[i][1]=0:"";array[i][2]<0?array[i][2]=0:""}var msg={array:array,pointer:0,len:array.length,page:element,msec:msec,second:second,sign:"backgroundColor"};if(attr)msg.sign=attr;var IEver=getIEVer();if(IEver<10&&IEver!==0){msg.first=true;loopColorForIE(msg)}else{loopColor(msg)}}function loopColor(msg){if(!msg.page.style)msg.page.style={};msg.page.style["transition"]="all "+msg.second+"s linear";msg.page.style["-o-transition"]="all "+msg.second+"s linear";msg.page.style["-moz-transition"]="all "+msg.second+"s linear";msg.page.style["-webkit-transition"]="all "+msg.second+"s linear";msg.page.style[msg.sign]="rgb("+msg.array[msg.pointer]+")";var interval=setInterval(function(){msg.pointer===msg.array.length-1?msg.pointer=0:msg.pointer++;msg.page.style[msg.sign]="rgb("+msg.array[msg.pointer]+")"},msg.msec)}function loopColorForIE(msg){var old_r,old_g,old_b;if(msg.first){msg.first=false;var oldColor=msg.page.style[msg.sign]||"rgb(0,0,0)";oldColor=oldColor.substring(4,oldColor.indexOf(")"));var old_rgb=oldColor.split(",");old_r=parseInt(old_rgb[0]);old_g=parseInt(old_rgb[1]);old_b=parseInt(old_rgb[2])}else{var lastPointer;msg.pointer===0?lastPointer=msg.len-1:lastPointer=msg.pointer-1;old_r=msg.array[lastPointer][0];old_g=msg.array[lastPointer][1];old_b=msg.array[lastPointer][2]}var r=msg.array[msg.pointer][0];var g=msg.array[msg.pointer][1];var b=msg.array[msg.pointer][2];var count=0;var max=0;Math.abs(r-old_r)>Math.abs(g-old_g)?Math.abs(r-old_r)>Math.abs(b-old_b)?max=Math.abs(r-old_r):max=Math.abs(b-old_b):Math.abs(g-old_g)>Math.abs(b-old_b)?max=Math.abs(g-old_g):max=Math.abs(b-old_b);var msec=msg.msec/max;var interval=setInterval(function(){if(count==max){clearInterval(interval);msg.pointer===msg.len-1?msg.pointer=0:msg.pointer++;return loopColorForIE(msg)}msg.page.style[msg.sign]="rgb("+old_r+","+old_g+","+old_b+")";r>old_r?old_r++:r<old_r?old_r--:"";g>old_g?old_g++:g<old_g?old_g--:"";b>old_b?old_b++:b<old_b?old_b--:"";count++},msec)}function getIEVer(){var ua=navigator.userAgent;var b=ua.indexOf("MSIE");if(b<0){return 0}return parseFloat(ua.substring(b+5,ua.indexOf(";",b)))}})(window);